{"ast":null,"code":"'use client';\n\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Botao from \"@/components/eventos/botao\";\nimport Formulario from \"@/components/eventos/formulario\";\nimport Layout from \"@/components/eventos/layout\";\nimport Tabela from \"@/components/eventos/tabela\";\nimport Evento from \"@/core/Evento\";\nimport { atualizarEvento, cadastrarEvento, excluirEvento, fetchEventos } from \"@/service/eventoService\";\nimport { useEffect, useState } from \"react\";\nimport React from \"react\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Eventos() {\n  var _useState = useState(Evento.vazio()),\n    _useState2 = _slicedToArray(_useState, 2),\n    evento = _useState2[0],\n    setEvento = _useState2[1];\n  var _useState3 = useState('tabela'),\n    _useState4 = _slicedToArray(_useState3, 2),\n    visivel = _useState4[0],\n    setVisivel = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    eventos = _useState6[0],\n    setEventos = _useState6[1];\n  useEffect(function () {\n    if (visivel === 'tabela') {\n      var loadEventos = function () {\n        var _ref = _asyncToGenerator(function* () {\n          try {\n            var dados = yield fetchEventos();\n            setEventos(dados);\n          } catch (error) {\n            console.error(\"Erro ao buscar eventos:\", error);\n          }\n        });\n        return function loadEventos() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      loadEventos();\n    }\n  }, [visivel]);\n  function eventoSelecionado(evento) {\n    setEvento(evento);\n    setVisivel('form');\n  }\n  function eventoExcluido(_x) {\n    return _eventoExcluido.apply(this, arguments);\n  }\n  function _eventoExcluido() {\n    _eventoExcluido = _asyncToGenerator(function* (evento) {\n      var confirmacao = window.confirm(\"Tem certeza de que deseja excluir este evento?\");\n      if (confirmacao) {\n        try {\n          if (evento.id !== null) {\n            yield excluirEvento(evento.id);\n          } else {\n            console.error(\"eventoId é null!\");\n          }\n          setEventos(function (prevEventos) {\n            return prevEventos.filter(function (ev) {\n              return ev.id !== evento.id;\n            });\n          });\n        } catch (error) {\n          console.error(\"Erro ao excluir evento:\", error);\n        }\n      }\n    });\n    return _eventoExcluido.apply(this, arguments);\n  }\n  function salvarOuAlterarEvento(evento) {\n    if (evento.id) {\n      alterarEvento(evento);\n    } else {\n      salvarEvento(evento);\n    }\n  }\n  function alterarEvento(_x2) {\n    return _alterarEvento.apply(this, arguments);\n  }\n  function _alterarEvento() {\n    _alterarEvento = _asyncToGenerator(function* (evento) {\n      try {\n        var eventoAtualizado = yield atualizarEvento(evento);\n        setVisivel(\"tabela\");\n      } catch (error) {\n        console.error(\"Erro ao atualizar evento:\", error);\n      }\n    });\n    return _alterarEvento.apply(this, arguments);\n  }\n  function salvarEvento(_x3) {\n    return _salvarEvento.apply(this, arguments);\n  }\n  function _salvarEvento() {\n    _salvarEvento = _asyncToGenerator(function* (evento) {\n      try {\n        var _novoEvento = yield cadastrarEvento(evento);\n        setVisivel(\"tabela\");\n      } catch (error) {\n        console.error(\"Erro ao salvar evento:\", error);\n      }\n    });\n    return _salvarEvento.apply(this, arguments);\n  }\n  function novoEvento() {\n    setEvento(Evento.vazio());\n    setVisivel(\"form\");\n  }\n  return _jsx(\"div\", {\n    className: `\n     flex justify-center items-center h-screen\n     bg-gradient-to-bl from-indigo-900 via-indigo-400 to-indigo-900\n     text-white`,\n    children: _jsx(Layout, {\n      titulo: \"Cadastro de eventos\",\n      children: visivel === 'tabela' ? _jsxs(_Fragment, {\n        children: [_jsx(\"div\", {\n          className: \"flex justify-end\",\n          children: _jsx(Botao, {\n            className: \"mb-4\",\n            cor: \"bg-gradient-to-r from-green-500 to-green-700\",\n            onClick: function onClick() {\n              return novoEvento();\n            },\n            children: \"Novo evento\"\n          })\n        }), _jsx(Tabela, {\n          eventos: eventos,\n          eventoSelecionado: eventoSelecionado,\n          eventoExcluido: eventoExcluido\n        })]\n      }) : _jsx(Formulario, {\n        evento: evento,\n        eventoMudou: salvarOuAlterarEvento,\n        cancelado: function cancelado() {\n          return setVisivel('tabela');\n        }\n      })\n    })\n  });\n}","map":{"version":3,"names":["_asyncToGenerator","_slicedToArray","Botao","Formulario","Layout","Tabela","Evento","atualizarEvento","cadastrarEvento","excluirEvento","fetchEventos","useEffect","useState","React","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Eventos","_useState","vazio","_useState2","evento","setEvento","_useState3","_useState4","visivel","setVisivel","_useState5","_useState6","eventos","setEventos","loadEventos","_ref","dados","error","console","apply","arguments","eventoSelecionado","eventoExcluido","_x","_eventoExcluido","confirmacao","window","confirm","id","prevEventos","filter","ev","salvarOuAlterarEvento","alterarEvento","salvarEvento","_x2","_alterarEvento","eventoAtualizado","_x3","_salvarEvento","novoEvento","className","children","titulo","cor","onClick","eventoMudou","cancelado"],"sources":["C:/Users/junqu/OneDrive/Área de Trabalho/Programas/ProgWebMob2/src/app/eventos/page.tsx"],"sourcesContent":["'use client';\nimport Botao from \"@/components/eventos/botao\";\nimport Formulario from \"@/components/eventos/formulario\";\nimport Layout from \"@/components/eventos/layout\";\nimport Tabela from \"@/components/eventos/tabela\";\nimport Evento from \"@/core/Evento\";\nimport { atualizarEvento, cadastrarEvento, excluirEvento, fetchEventos } from \"@/service/eventoService\";\nimport { useEffect, useState } from \"react\";\nimport React from \"react\";\n\n\nexport default function Eventos() {\n\n  const [evento, setEvento] = useState<Evento>(Evento.vazio())\n  const [visivel, setVisivel] = useState<'tabela' | 'form'>('tabela')\n\n  const [eventos, setEventos] = useState<Evento[]>([]);\n\n  useEffect(() => {\n    if (visivel === 'tabela') {\n      const loadEventos = async () => {\n        try {\n          const dados = await fetchEventos();\n          setEventos(dados);\n        } catch (error) {\n          console.error(\"Erro ao buscar eventos:\", error);\n        }\n      }\n\n      loadEventos();\n    }\n  }, [visivel]);\n\n\n  function eventoSelecionado(evento: Evento) {\n    setEvento(evento)\n    setVisivel('form')\n  }\n\n  async function eventoExcluido(evento: Evento) {\n    const confirmacao = window.confirm(\"Tem certeza de que deseja excluir este evento?\");\n    if (confirmacao) {\n      try {\n        if (evento.id !== null) {\n          await excluirEvento(evento.id);\n        } else {\n          console.error(\"eventoId é null!\");\n        }\n        setEventos(prevEventos => prevEventos.filter(ev => ev.id !== evento.id));\n      } catch (error) {\n        console.error(\"Erro ao excluir evento:\", error);\n      }\n    }\n  }\n\n  function salvarOuAlterarEvento(evento: Evento) {\n    if (evento.id) {\n      alterarEvento(evento)\n    } else {\n      salvarEvento(evento)\n    }\n  }\n\n  async function alterarEvento(evento: Evento) {\n    try {\n      const eventoAtualizado = await atualizarEvento(evento);\n      setVisivel(\"tabela\");\n    } catch (error) {\n      console.error(\"Erro ao atualizar evento:\", error);\n    }\n  }\n\n  async function salvarEvento(evento: Evento) {\n    try {\n      const novoEvento = await cadastrarEvento(evento);\n      setVisivel(\"tabela\");\n    } catch (error) {\n      console.error(\"Erro ao salvar evento:\", error);\n    }\n  }\n\n  function novoEvento() {\n    setEvento(Evento.vazio())\n    setVisivel(\"form\")\n  }\n\n  return (\n    <div className={`\n     flex justify-center items-center h-screen\n     bg-gradient-to-bl from-indigo-900 via-indigo-400 to-indigo-900\n     text-white`}>\n      <Layout titulo=\"Cadastro de eventos\">\n        {visivel === 'tabela' ? (\n          <>\n            <div className=\"flex justify-end\">\n              <Botao className=\"mb-4\" cor=\"bg-gradient-to-r from-green-500 to-green-700\"\n                onClick={() => novoEvento()}>\n                Novo evento\n              </Botao>\n            </div>\n            <Tabela eventos={eventos}\n              eventoSelecionado={eventoSelecionado}\n              eventoExcluido={eventoExcluido}></Tabela>\n          </>\n        ) : (\n          <Formulario evento={evento}\n            eventoMudou={salvarOuAlterarEvento}\n            cancelado={() => setVisivel('tabela')} />\n        )}\n      </Layout>\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}